@echo off
chcp 65001 >nul
title –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ - –§–∏–ª—å–º—ã –∏ –°–µ—Ä–∏–∞–ª—ã
color 0A

echo ========================================
echo   –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞–º–∏
echo ========================================
echo.

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Node.js
echo [1/3] –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js...
where node >nul 2>nul
if %ERRORLEVEL% NEQ 0 (
    color 0C
    echo ‚ùå –û–®–ò–ë–ö–ê: Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo.
    echo –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞:
    echo https://nodejs.org/
    echo.
    echo –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è LTS (Long Term Support)
    echo.
    pause
    exit /b 1
)

:: –í—ã–≤–æ–¥ –≤–µ—Ä—Å–∏–∏ Node.js
for /f "tokens=*" %%v in ('node --version') do set NODE_VERSION=%%v
echo ‚úÖ Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: %NODE_VERSION%
echo.

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è package.json
if not exist "package.json" (
    color 0C
    echo ‚ùå –û–®–ò–ë–ö–ê: –§–∞–π–ª package.json –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo.
    echo –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.
    echo.
    pause
    exit /b 1
)

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo [2/3] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
if not exist "node_modules\" (
    echo ‚ö† –ü–∞–ø–∫–∞ node_modules –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.
    echo üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.
    echo.
    call npm install
    if %ERRORLEVEL% NEQ 0 (
        color 0C
        echo.
        echo ‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
        echo.
        pause
        exit /b 1
    )
    echo.
    echo ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
) else (
    echo ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–π–¥–µ–Ω—ã
)
echo.

:: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è —Ñ–∏–ª—å–º–æ–≤ –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
if not exist "films_and_serials\" (
    mkdir "films_and_serials"
    echo ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ films_and_serials
    echo.
)

:: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
echo [3/3] –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞...
echo.
echo ========================================
echo   –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω!
echo ========================================
echo.
echo üåê –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
echo    http://localhost:3000/index1.html
echo.
echo üí° –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
echo.
echo ========================================
echo.

node server.js

:: –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π
if %ERRORLEVEL% NEQ 0 (
    color 0C
    echo.
    echo ‚ùå –°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π!
    echo.
    echo –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
    echo - –ü–æ—Ä—Ç 3000 —É–∂–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
    echo - –û—à–∏–±–∫–∞ –≤ —Ñ–∞–π–ª–µ server.js
    echo - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
    echo.
    pause
)

